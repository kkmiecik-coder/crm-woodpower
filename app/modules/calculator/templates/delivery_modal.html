<!-- Nowy modal opcji dostawy -->
<div id="deliveryModal" class="delivery-modal-overlay">
    <div class="delivery-modal-container">
        <!-- Header -->
        <div class="delivery-modal-header">
            <h2 class="delivery-modal-title">Wybierz spos√≥b dostawy</h2>
            <button type="button" class="delivery-modal-close" id="deliveryModalClose">
                √ó
            </button>
        </div>

        <!-- Widok g≈Ç√≥wny - lista opcji -->
        <div id="deliveryMainView" class="delivery-modal-main-view">
            <!-- Przycisk dodania w≈Çasnego kuriera -->
            <button type="button" class="delivery-modal-add-custom" id="addCustomCarrier">
                <span>‚ûï</span>
                Dodaj w≈Çasnego kuriera
            </button>

            <!-- Nag≈Ç√≥wki kolumn -->
            <div class="delivery-modal-headers">
                <div></div>
                <div>Kurier</div>
                <div id="deliveryHeaderAdjusted">Cena + 30%</div>
                <div>Cena oryginalna</div>
            </div>

            <!-- Kontener opcji -->
            <div class="delivery-modal-options">
                <!-- Lista opcji dostawy -->
                <div class="delivery-modal-list" id="deliveryOptionsList">
                    <!-- Opcje generowane dynamicznie -->
                </div>

                <!-- Loading state -->
                <div class="delivery-modal-loading delivery-modal-hidden" id="deliveryLoading">
                    <div class="delivery-modal-spinner"></div>
                    ≈Åadowanie opcji dostawy...
                </div>

                <!-- Empty state -->
                <div class="delivery-modal-empty delivery-modal-hidden" id="deliveryEmpty">
                    <div class="delivery-modal-empty-icon">üì¶</div>
                    <div>Brak dostƒôpnych opcji dostawy</div>
                </div>

                <!-- Error state -->
                <div class="delivery-modal-error delivery-modal-hidden" id="deliveryError">
                    <strong>B≈ÇƒÖd podczas ≈Çadowania opcji dostawy</strong>
                    <div id="deliveryErrorMessage"></div>
                </div>
            </div>

            <!-- Paginacja -->
            <div class="delivery-modal-pagination delivery-modal-hidden" id="deliveryPagination">
                <button type="button" class="delivery-modal-page-btn" id="deliveryPrevPage" disabled>
                    ‚Äπ
                </button>
                <div id="deliveryPageNumbers" class="delivery-modal-page-numbers">
                    <!-- Numery stron generowane dynamicznie -->
                </div>
                <button type="button" class="delivery-modal-page-btn" id="deliveryNextPage" disabled>
                    ‚Ä∫
                </button>
            </div>

            <!-- Info o pakowaniu -->
            <div class="delivery-modal-packing-info delivery-modal-hidden" id="deliveryPackingInfo">
                ‚ÑπÔ∏è Do cen wysy≈Çki zosta≈Ça doliczona kwota na pakowanie.
            </div>
        </div>

        <!-- Widok formularza w≈Çasnego kuriera -->
        <div id="deliveryCustomView" class="delivery-modal-custom-form">
            <!-- Header z przyciskiem powrotu -->
            <div style="margin-bottom: 24px;">
                <button type="button" class="delivery-modal-back" id="backToDeliveryList">
                    ‚Üê Powr√≥t do listy kurier√≥w
                </button>
            </div>

            <!-- Formularz -->
            <div class="delivery-modal-form-grid">
                <div class="delivery-modal-form-group full-width">
                    <label class="delivery-modal-form-label">Nazwa kuriera</label>
                    <input type="text" 
                           class="delivery-modal-form-input" 
                           id="customCarrierName" 
                           placeholder="Wpisz nazwƒô kuriera...">
                </div>

                <div class="delivery-modal-form-group">
                    <label class="delivery-modal-form-label">Kwota netto (PLN)</label>
                    <input type="number" 
                           class="delivery-modal-form-input" 
                           id="customCarrierNetto" 
                           placeholder="0.00"
                           step="0.01"
                           min="0">
                </div>

                <div class="delivery-modal-form-group">
                    <label class="delivery-modal-form-label">Kwota brutto (PLN)</label>
                    <input type="number" 
                           class="delivery-modal-form-input" 
                           id="customCarrierBrutto" 
                           placeholder="0.00"
                           step="0.01"
                           min="0">
                </div>
            </div>

            <!-- Kalkulator mar≈ºy -->
            <div class="delivery-modal-calculator">
                <div class="delivery-modal-calculator-title">
                    üßÆ Kalkulacja ko≈Ñcowej ceny
                </div>
                
                <div class="delivery-modal-calculation-row">
                    <div class="delivery-modal-calculation-label">Kwota brutto:</div>
                    <div class="delivery-modal-calculation-value" id="calcBaseBrutto">0.00 PLN</div>
                </div>
                
                <div class="delivery-modal-calculation-row">
                    <div class="delivery-modal-calculation-label">Koszty pakowania (+30%):</div>
                    <div class="delivery-modal-calculation-value" id="calcMargin">0.00 PLN</div>
                </div>
                
                <div class="delivery-modal-calculation-row delivery-modal-calculation-final">
                    <div class="delivery-modal-calculation-label">Ko≈Ñcowa cena:</div>
                    <div class="delivery-modal-calculation-value" id="calcFinalPrice">0.00 PLN</div>
                </div>
            </div>
        </div>

        <!-- Footer z przyciskami -->
        <div class="delivery-modal-footer">
            <button type="button" class="delivery-modal-btn delivery-modal-btn-secondary" id="deliveryModalCancel">
                Anuluj
            </button>
            <button type="button" class="delivery-modal-btn delivery-modal-btn-primary" id="deliveryModalConfirm" disabled>
                <span id="deliveryConfirmText">Zapisz</span>
            </button>
        </div>
    </div>
</div>